git:
  depth: 1

language: go

go:
  - "1.12"

env:
  - GO111MODULE=on

before_install:
  - go version
  - go env
  - sudo apt-get install -y upx-ucl

script:
  - go build -v
  - build/build.sh
  # test
  - ./serve -h
  - ./serve -v
  - ./serve -t
  - build/artifacts/serve_v*_Linux_x64 -h
  - build/artifacts/serve_v*_Linux_x64 -v
  - build/artifacts/serve_v*_Linux_x64 -t
